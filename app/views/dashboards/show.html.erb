<h2 class="h2_non_eteint">Your dashboard</h2>
<div class= "btn-box sports-box-activity">
  <%= link_to "Search a new activity", events_path, class:"btn btn-flat btn-flat-activity1" %>
</div>
<h2 class="h2_eteint">Your program</h2>
<div class="dashboard-section pt-5 pb-5">
  <div class="user_activities">
    <i class="fas fa-chevron-left text-white"></i>
    <div class="slider-program">
      <% if @user_events.length > 0 %>
        <% @user_events.each do |event| %>
          <div class="event_matched_by_user slide">
            <%= image_tag 'boxing-gloves.png', class: "sports-image", alt: 'box glove',height: 30, width: 30 %>
            <span><%= event.event.start_at.strftime("%-d %b") %></span>
            <span class='p-1'><%= event.event.start_at.hour %>h</span>
          </div>
        <% end %>
      <% else %>
        <div class="d-flex flex-column">
          <h3 class='text-white h3-default text-secondary'>Add events</h3>
              <h1><i class="fas fa-arrow-down text-white m-5 text-secondary"></i></h1>
        </div>
      <% end %>

      <% @user_events.each do |event| %>
      <div class="card-events">
          <div class="event">
            <div class="sport-event-card">
              <h3><strong><%= event.event.sport.capitalize %></strong></h3>
              <div class="sport-info">
                <p><i class="far fa-calendar-alt"></i>  <%= event.event.start_at.to_date %></p>
                <p><i class="far fa-clock"></i>  <%= event.event.start_at.strftime('%k') %>h</p>
              </div>
            </div>
          <%= image_tag("boxing-gloves.png", class: 'sport-img')%>
          </div>
      </div>

      <div class="collapse decription-event" id="description-collapse-<%= event.id %>">
        <div class="address-details">
          <div class="event-address">
            <p><strong><%= event.address.capitalize %>
              <button class="font-map js-selector" id="<%=event.id%>" data-toggle="modal" data-target="#myModal" data-position="<%= event.to_coordinates.to_json %>" data-name="<%= event.sport %>"><i class="fas fa-map-marker-alt"></i> On map</button>
            </strong></p>
          </div>
        </div>

        <div class="info-sport-event">
          <div class="details-duration">
            <p><i class="fas fa-stopwatch"></i>  <%= event.duration %> min.</p>
          </div>
          <div class="details-level">
            <% if event.event.level == 1 %>
              <p><i class="fas fa-dumbbell"></i></p>
              <p><i class="fas fa-dumbbell" id="last-child"></i></p>
              <p><i class="fas fa-dumbbell" id="last-child"></i></p>
            <% elsif %>
              <% event.event.level == 2  %>
              <p><i class="fas fa-dumbbell"></i></p>
              <p><i class="fas fa-dumbbell"></i></p>
              <p><i class="fas fa-dumbbell" id="last-child"></i></p>
            <% else  %>
              <p><i class="fas fa-dumbbell"></i></p>
              <p><i class="fas fa-dumbbell"></i></p>
              <p><i class="fas fa-dumbbell"></i></p>
            <% end %>
          </div>
        </div>
        <div class="text-event">
            <p><%= event.event.description %></p>
        </div>
        <div class="capacity-event d-flex justify-content-end pr-3">
          <div class="d-flex event-avatars">
            <% event.users.take(5).each do |user| %>
              <%= user_image_tag(user, class: "avatar-bordered single-card rounded-circle border border-white", alt: "avatar-bordered") %>
            <% end %>
          </div>
        </div>
      </div>
      <% end %>


<div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Localisation</h4>
        <div  class="close-pop-up" data-dismiss="modal">&times;</div>
      </div>
      <div class="modal-body">
        <div
          id="map"
          style="width:100%;
          height: 80vh;"
          data-markers="<%= @markers.to_json %>"
          data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
        ></div>
      </div>
    </div>

  </div>












    </div>
    <i class="fas fa-chevron-right text-white"></i>
  </div>
  </div>
</div>
<div class= "btn-box sports-box-events">
  <%= link_to "Matching events", matching_events_path, class:"btn btn-flat btn-flat-activity2" %>
</div>
<h2 class="h2_eteint-sport">Your favorite sports</h2>
  <div class="user_activities pl-4 pr-4">
    <div class="container-sports">
      <div class="favorites-sports">
        <% if @fav_sport.length > 0 %>
          <% @fav_sport.each do |sport| %>
            <div class="event_fav_sport">
              <%= image_tag "#{sport}.png", alt: 'box glove',height: 60, width: 60 %>
            </div>
          <% end %>
        <% else %>
          <div class="d-flex flex-column">
            <h3 class='text-white m-3 text-secondary'>Add availabilities</h3>
            <h1><i class="fas fa-arrow-down text-white m-5 text-secondary"></i></h1>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class= "btn-box sports-">
    <%= link_to "Update Sport", edit_favorite_sports_path, class:"btn btn-flat btn-flat-update-2" %>
  </div>
</div>
  <h2 class="h2_eteint">Your availabilities</h2>
  <div class="user_availability pl-4 pr-4">
    <div class="container-availability">
      <div class="user_activities-schedule">
      <i class="fas fa-chevron-left fa-left-activity"></i>
          <% if @availabilities.length > 0 %>
            <div class="slider">
            <% @availabilities.each do |availability| %>
              <div class="event_fav_availabilities slide">
                <div class="pastille">
                  <span class="pink-circle"></span>
                  <span><%= availability.day_name.capitalize %></span>
                </div>
                <div class="availabities-result">
                  <% if availability.slot_1%>
                    <p>8h - 10h</p>
                  <% end %>
                  <% if availability.slot_2%>
                    <p>10h - 12h</p>
                  <% end %>
                  <% if availability.slot_3%>
                    <p>12h - 14h</p>
                  <% end %>
                  <% if availability.slot_4%>
                    <p>14h - 16h</p>
                  <% end %>
                  <% if availability.slot_5%>
                    <p>16h - 18h</p>
                  <% end %>
                  <% if availability.slot_6%>
                    <p>18h - 20h</p>
                  <% end %>
                </div>
              </div>
            <% end %>
          <% else %>
            <div class="d-flex flex-column text-secondary">
              <h3 class='text-white m-3 text-secondary'>Add availabilities</h3>
              <h1><i class="fas fa-arrow-down text-white m-5 text-secondary"></i></h1>
            </div>
          <% end %>
        </div>
      </div>
    </div>
    <i class="fas fa-chevron-right fa-right-activity"></i>
  </div>
</div>
<div class= "btn-box sports-">
  <%= link_to "Update Availabilities", edit_availabilities_path, class:"btn btn-flat btn-flat-update-3" %>
</div>
